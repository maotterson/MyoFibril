@using MyoFibril.MAUIBlazorApp.Services;
@inject IAddExerciseService _addExerciseService

<div class="dropdown">
    <button type="button" class="btn btn-danger dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
        Select Exercise
    </button>
    <ul class="dropdown-menu">
        <li @onclick="ClickedNewExercise"><a class="dropdown-item" href="#"><span class="oi oi-plus"></span> New Exercise</a></li>
        <li><hr class="dropdown-divider"></li>
        @foreach(var exercise in Exercises)
        {
            <li @onclick="() => ClickedSelectedExercise(exercise)"><a class="dropdown-item" href="#">@exercise</a></li>
        }
    </ul>
</div>


@code {
    List<string> Exercises => _addExerciseService.GetExercisesListAsync();
    protected override void OnInitialized()
    {
        _addExerciseService.OnModalStateChanged += StateHasChanged;
    }
    public void Dispose()
    {
        _addExerciseService.OnModalStateChanged -= StateHasChanged;
    }
    public void ClickedNewExercise()
    {
        _addExerciseService.AddExerciseToList("added exercise");
    }

    public void ClickedSelectedExercise(string exercise)
    {
        _addExerciseService.SelectedExercise = exercise;
    }
}
